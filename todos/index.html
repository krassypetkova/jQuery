<html>
<head>
    <meta charset="UTF-8">
    <title>TODOs</title>
    <link rel="stylesheet" href="hover.css" type="text/css">
    <link rel="stylesheet" href="todos.css" type="text/css">
    <link href='https://fonts.googleapis.com/css?family=Roboto:400,300&subset=latin,cyrillic' rel='stylesheet'
          type='text/css'>
    <script src="../bower_components/jquery/dist/jquery.min.js"></script>
</head>
<body>
<section id="wrapper">
    <h1 id="app-heading">todos</h1>

    <div id="todo-wrapper">
        <form id="add-todo-form">
            <input id="checkbox-all" type="checkbox">
            <input id="add-todo-input" name="message" placeholder="What needs to be done?">
        </form>
        <ul id="todo-list">
            <li class="completed"><input type="checkbox"><span>Пазар</span>
                <button class="btnRemove">X</button>
            </li>
            <li><input type="checkbox"><span>Чистене</span>
                <button class="btnRemove">X</button>
            </li>
            <li class="completed"><input type="checkbox"><span>Готвене</span>
                <button class="btnRemove">X</button>
            </li>
            <li><input type="checkbox"><span>Пране</span>
                <button class="btnRemove">X</button>
            </li>
        </ul>
        <footer>
            <p id="counter-items"></p>

            <div id="buttons-wrapper">
                <input id="show-all" class="btn hvr-glow" type="button" value="All">
                <input class="btn hvr-glow show-active" type="button" value="Active">
                <input class="btn hvr-glow show-completed" type="button" value="Completed">
            </div>
            <div id="items-right">
                <input class="btn hvr-glow clear-completed" type="button" value="Clear completed">
            </div>
        </footer>
    </div>
</section>

<script>
    var $todoList = $("#todo-list");

    $("#add-todo-form").submit(addTodo);
    $("#checkbox-all").click(toggleAllTodos);
    $(".clear-completed").click(clearCompleted);
    $(".show-completed").click(filterCompleted);
    $(".show-active").click(filterActive);
    $("#show-all").click(showAll);

    $("#todo-list input:checkbox").click(toggleTodo);
    $("#todo-list button.btnRemove").click(removeTodo);


    function addTodo(e) {
        e.preventDefault();

        var text = $("input[name=message]").val(),
                checkbox = $("<input type='checkbox'/>").click(toggleTodo),
                deleteButton = $("<button class='btnRemove'>X</button>").click(removeTodo),
                textEl = $("<span>" + text + "</span>")
        li = $("<li></li>").append(checkbox, textEl, deleteButton);

        $('ul').append(li);
        //$("input[name=message ]").val('');
        this.reset();
        updateItemsCount();
    }

    // Toggle completed state of all todo list items
    function toggleAllTodos() {
        // make varible for checked
        // regarding to that variable toggle the class of list items
        $('input:checkbox').not(this).prop('checked', this.checked);
        if ($(this).is(":checked")) {
            $('#todo-list > li').addClass("completed");
        } else {
            $('#todo-list > li').removeClass("completed");
        }

        /*if ($('li').css('textDecoration') == 'line-through') {
         $('li').css('textDecoration', 'none');
         $('li').parent().css('opacity', '1');
         } else {
         $('li').css('textDecoration', 'line-through');
         $('li').parent().css('opacity', '0.5');
         }*/
    }

    function toggleTodo() {
        $(this).parent().toggleClass('completed');
        $("#checkbox-all").prop("checked", false);
        updateItemsCount();
        /*
         if (todoItem.hasClass('completed')) {
         todoItem.removeClass('completed');
         } else {
         todoItem.addClass('completed');
         }*/
    }

    function removeTodo(e) {
        $(e.target.parentElement).remove();
        updateItemsCount();
    }

    function clearCompleted() {
        $("#todo-list .done:checkbox:checked").parent().remove();
        updateItemsCount();
    }


    function filterCompleted() {
        $todoList.find("li.completed").show();
        $todoList.find("li:not(.completed)").hide();
    }

    //same function with itteration implementation
    /*    function filterCompleted() {
     var $allTodos = $("#todo-list > li");

     $allTodos.each(function (index, todoEl) {
     $(todoEl).toggle($todo.hasClass('completed'));
     });
     }*/

    function filterActive() {
        $todoList.find("li.completed").hide();
        $todoList.find("li:not(.completed)").show();
    }

    function showAll() {
        $('#todo-list > li').show();
    }


    function updateItemsCount() {
        var n = $("#todo-list li:not(.completed)").length;
        $("#counter-items").text(n + " items left");
    }
    updateItemsCount();
    /* $(function() {
     $(document).on('click', '.clear-completed', clearCompleted);
     });*/
    /*$(function() {
     $(document).on('click', '#checkbox-all', checkAllTodos);
     });*/


    /* $( "#pushBtn" ).click(function () {
     var toAdd = $("input[name=message]").val(),
     deleteButton = $("<button class='btnRemove'>X</button>").click(removeTodo),
     li = $("<li>"+toAdd+"</li>").append(deleteButton);

     $('ul').append(li);
     });*/

    /*$("#btnRemove").click(function() {
     $("#myList li").val().remove();
     });*/


    /*function checkAllTodos() {
     /!* $("#tab1 #checkAll").click(function () {*!/
     if ($("#checkbox-all").is(':checked')) {
     $("input[type=checkbox].done").each(function () {
     $(this).prop("checked", true);
     });

     } else {
     $("input[type=checkbox].done").each(function () {
     $(this).prop("checked", false);
     });
     }
     }*/


    /* $("#checkbox-all").change(function () {
     $("input:checkbox").prop('checked', $(this).prop("checked"));
     });*/
</script>
</body>
</html>